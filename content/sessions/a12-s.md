---
key: a12-s
title: 型パラメータが使えるようになったのでLINQを実装してみた
id: makki_d
format: conference
talkType: short_session
level: Intermediate
tags: []
speakers:
- makki_d
partner: null
videoId: null
presentation: null
draft: false
---
## LINQとは

LINQ（言語統合クエリ）は、.Net Framework 3.5で導入された、様々な種類のコレクションに対する操作を標準的な方法でおこなうための言語機能です。
C#においては、コレクションを`IEnumerable<T>`のようなジェネリック型で抽象化し、それに対する操作（クエリ）をその拡張メソッドとして実装しています。

LINQでは様々なクエリが用意されていますが、データシーケンス（たとえば`IEnumerable<T>`）を返すようなクエリは遅延評価されます。
また多くのクエリは、要素を操作する関数を引数に取るような高階関数となっており、高度に抽象化されています。

## Goによる型パラメータを使った実装

GoでLINQを実装するには、型パラメータを使ってコレクションを抽象化し、そのコレクションを操作する型パラメータつきの関数を定義していきます。

### 具体的な実装の紹介

この発表ではsliceやmapなどをコレクションとして扱う方法と、WhereやSelect、ToSliceやAggregateといった様々なタイプのクエリの具体的な実装方法を紹介します。
そしてこれらがきちんと型付けされることや、遅延評価されることも解説します。

### 型パラメータによる実装の制限

この実装ではクエリをレシーバ関数ではない普通の関数として実装するため、C#のようなメソッドチェインとしての使い方はできません。
なぜレシーバ関数として実装できないのか、言語仕様とその根底にある設計思想を交えて解説します。

## 型パラメータ以前のGoによるLINQの実装

型パラメータ導入以前から、Goで使えるLINQはいくつか実装されていました。
ここでは今回紹介した型パラメータをつかった実装との比較を通して、型パラメータの利点をまとめます。

## まとめ

LINQの実装ような実践的な型パラメータの使い方を見ることで、みなさんがより効果的に型パラメータを使えるようになることを望みます。
